@page "/SamplePages/InvoiceEdit/{InvoiceID:int}/{CustomerID:int}/{EmployeeID:int}"

@using HogWildSystem.ViewModels

<PageTitle>Invoice Edit</PageTitle>

<MudText Typo="Typo.h3">
    @(InvoiceID == 0 ? "New Invoice" : $"Invoice #: {InvoiceID}")
</MudText>

<MudGrid>
    <MudItem sm="12" md="6">
        <MudPaper Elevation="4" Class="pa-2" Height="155px">
            <MudStack>
                <MudText Typo="Typo.h6" Align="Align.Center">
                    <strong>Invoice Date: </strong>@invoice.InvoiceDate.ToShortDateString()
                </MudText>
                <MudText Typo="Typo.h6" Align="Align.Center">
                    <strong>Employee: </strong>@invoice.EmployeeName
                </MudText>
                <MudText Typo="Typo.h6" Align="Align.Center">
                    <strong>Customer: </strong>@invoice.CustomerName
                </MudText>
            </MudStack>
        </MudPaper>
    </MudItem>
    <MudItem sm="12" md="6">
        <MudPaper Elevation="4" Class="pa-2" Height="155px">
            <MudStack>
                <!-- SubTotal -->
                <MudText Typo="Typo.h6" Align="Align.Center">
                    <strong>SubTotal: </strong>@invoice.SubTotal.ToString("C2")
                </MudText>
                <!-- Tax -->
                <MudText Typo="Typo.h6" Align="Align.Center">
                    <strong>Tax: </strong>@invoice.Tax.ToString("C2")
                </MudText>
                <MudDivider DividerType="DividerType.Middle" />
                <!-- Total -->
                <MudText Typo="Typo.h6" Align="Align.Center">
                    <strong>Total: </strong>@invoice.Total.ToString("C2")
                </MudText>
            </MudStack>
        </MudPaper>
    </MudItem>
</MudGrid>

<MudStack Row
          Class="mt-2"
          AlignItems="AlignItems.Center"
          Justify="Justify.FlexStart"
          Spacing="4">
    <MudSelect Variant="Variant.Outlined"
               ValueChanged="(int? newCategoryID) => CategoryChanged(newCategoryID)">
        @foreach (var category in parts.Select(x => new
                                        {
                                            CatgegoryID = x.PartCategoryID,
                                            CategoryName = x.CategoryName
                                        })
                                        .Distinct()
                                        .ToList()
        )
        {
            <MudSelectItem T="int?" Value="category.CatgegoryID">@category.CategoryName</MudSelectItem>
        }
    </MudSelect>
    <MudSelect @bind-Value="selectedPart"
               Variant="Variant.Outlined"
               Placeholder="Select a Part..."
               Disabled="@(categoryID == null || categoryID == 0)">
        @foreach(var part in parts.Where(x => x.PartCategoryID == categoryID).ToList())
        {
            <MudSelectItem T="PartView" Value="part">@part.Description</MudSelectItem>
        }
    </MudSelect>
</MudStack>